var Qt=Object.defineProperty;var Nt=o=>{throw TypeError(o)};var Ut=(o,i,e)=>i in o?Qt(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var O=(o,i,e)=>Ut(o,typeof i!="symbol"?i+"":i,e),Ct=(o,i,e)=>i.has(o)||Nt("Cannot "+e);var t=(o,i,e)=>(Ct(o,i,"read from private field"),e?e.call(o):i.get(o)),a=(o,i,e)=>i.has(o)?Nt("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,e),s=(o,i,e,n)=>(Ct(o,i,"write to private field"),n?n.call(o,e):i.set(o,e),e),yt=(o,i,e)=>(Ct(o,i,"access private method"),e);var d=(o,i,e,n)=>({set _(l){s(o,i,l,e)},get _(){return t(o,i,n)}});(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(l){if(l.ep)return;l.ep=!0;const h=e(l);fetch(l.href,h)}})();const r={Idle:"Idle",Sorted:"Sorted",Current:"Current",OnHold:"OnHold",InAction:"InAction"},Mt="http://www.w3.org/2000/svg";function N(o){return new Promise(i=>setTimeout(i,o))}var ft,xt;class Dt{constructor(i,e){a(this,ft);O(this,"value");O(this,"svg");O(this,"width",15);O(this,"state",r.Idle);this.value=i,this.width=e,this.svg=document.createElementNS(Mt,"rect"),this.svg.setAttribute("height",yt(this,ft,xt).call(this)),this.svg.setAttribute("width",e),this.svg.setAttribute("y",651-yt(this,ft,xt).call(this)),this.setState(r.Idle)}setState(i){switch(i){case r.Idle:this.svg.setAttribute("fill","#6180B9");break;case r.Sorted:this.svg.setAttribute("fill","#61B96E");break;case r.Current:this.svg.setAttribute("fill","#D4A932");break;case r.OnHold:this.svg.setAttribute("fill","#ecd80c");break;case r.InAction:this.svg.setAttribute("fill","#e68c10");break;default:throw new Error("Invalid state")}this.state=i}}ft=new WeakSet,xt=function(){return this.value*5};const Et=10,Jt=120;var z,Q,at,pt,ht;const wt=class wt{constructor(){a(this,z);a(this,Q,!1);a(this,at,!1);O(this,"collection",[]);O(this,"svg");O(this,"collectionField");O(this,"table");a(this,pt,10)}static getInstance(){return t(this,ht)||s(this,ht,new wt),t(this,ht)}configure(i,e,n){this.svg=i,this.collectionField=e,this.table=n}setAlgorithm(i){s(this,z,i),this.reset()}createCollection(i=18,e=[]){this.isRunning()&&this.stop();const n=50/i,l=900/(i+n),h=[];for(let u=0;u<i;u++){const x=e[u]??Math.floor(Math.random()*(Jt-Et))+Et,et=new Dt(x,l);h.push(et)}this.collection=h,this.svg.replaceChildren([]);let c=1e3/2-i/2*(l+n);for(const u of this.collection)u.svg.setAttribute("x",c),c+=n+l,this.svg.appendChild(u.svg);this.updateCollectionField()}async shuffleCollection(){this.stop();for(let i=this.collection.length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));await this.swap(this.collection[i],this.collection[e],!1)}this.reset(),this.updateCollectionField()}updateCollectionField(){this.collectionField.value=this.collection.map(i=>i.value).join(`
`)}changeSpeed(i){s(this,pt,i**1.65/2500)}getSpeed(){return t(this,pt)*this.collection.length}start(){return t(this,Q)||!t(this,z)||this.collection.length===0?!1:(s(this,Q,!0),t(this,z).start(this.collection),!0)}stop(){s(this,Q,!1)}reset(){this.stop();for(let i=0;i<this.collection.length;i++)this.collection[i].setState(r.Idle);this.updateCollectionField()}async step(){if(!t(this,z))throw new Error("Current algorithm is null");if(!t(this,Q))throw new Error("Can't step algorithm while not running");if(t(this,at))return!0;s(this,at,!0);const i=await t(this,z).step();return i||(t(this,z).end(),s(this,Q,!1)),s(this,at,!1),this.updateCollectionField(),i}isRunning(){return t(this,Q)}swap(i,e,n=!0){const l=h=>{i.svg.replaceChildren([]),e.svg.replaceChildren([]);const c=i.svg.getAttribute("x");i.svg.setAttribute("x",e.svg.getAttribute("x")),e.svg.setAttribute("x",c);const u=this.collection.indexOf(i),x=this.collection.indexOf(e);this.collection[u]=e,this.collection[x]=i,h()};return new Promise(h=>{const c=n?2e3/this.getSpeed():0;function u(T,Tt,zt){const st=document.createElementNS(Mt,"animate");st.setAttribute("attributeName","x"),st.setAttribute("from",Tt),st.setAttribute("to",zt),st.setAttribute("dur",`${c}ms`),st.setAttribute("fill","freeze"),T.appendChild(st),st.beginElement()}const x=i.svg.getAttribute("x"),et=e.svg.getAttribute("x");u(i.svg,x,et),u(e.svg,et,x),setTimeout(()=>{l(h)},c)})}};z=new WeakMap,Q=new WeakMap,at=new WeakMap,pt=new WeakMap,ht=new WeakMap,a(wt,ht);let vt=wt;class ${constructor(){O(this,"collection",[]);O(this,"manager")}start(i){this.collection=i,this.manager=vt.getInstance();for(const e of this.collection)e.setState(r.Idle)}async step(){}end(){}static get name(){return"Algorithm"}static get timeComplexity(){return{best:"O(n log n)",average:"O(n log n)",worst:"O(n log n)"}}static get spaceComplexity(){return"O(1)"}}var E,U,ct,it;class Kt extends ${constructor(){super(...arguments);a(this,E,0);a(this,U,0);a(this,ct,[]);a(this,it)}start(e,n){super.start(e,n),s(this,E,0),s(this,U,0),s(this,it,null),s(this,ct,[!0])}async step(){var l;super.step();const e=this.collection[t(this,U)],n=this.collection[t(this,U)+1];return(l=t(this,it))==null||l.setState(r.Idle),e.setState(r.Current),n.setState(r.Current),s(this,it,e),t(this,ct)[t(this,E)]?(n.value<e.value?(s(this,it,n),await this.manager.swap(e,n),t(this,ct)[t(this,E)+1]=!0):await N(1300/this.manager.getSpeed()),d(this,U)._++,t(this,U)>=this.collection.length-t(this,E)-1&&((e.value>n.value?e:n).setState(r.Sorted),d(this,E)._++,s(this,U,0)),t(this,E)>=this.collection.length-1&&(e.setState(r.Sorted),n.setState(r.Sorted)),t(this,E)<this.collection.length-1):(this.collection.forEach(h=>h.setState(r.Sorted)),!1)}static get name(){return"Bubble Sort"}static get timeComplexity(){return{best:"O(n)",average:"O(n²)",worst:"O(n²)"}}static get spaceComplexity(){return"O(1)"}}E=new WeakMap,U=new WeakMap,ct=new WeakMap,it=new WeakMap;class Vt extends ${start(i,e){super.start(i,e)}async step(){super.step();const i=this.collection;for(const n of i)n.state!==r.Sorted&&n.setState(r.Idle);for(let n=i.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1));await this.manager.swap(i[n],i[l],!1)}await N(300/this.manager.getSpeed());let e=!0;for(let n=0;n<i.length-1;n++)if(i[n].value>i[n+1].value){e=!1;break}if(e){for(const n of i)n.setState(r.Sorted);return!1}return!0}static get name(){return"Bogo Sort"}static get timeComplexity(){return{best:"O(n)",average:"O(n·n!)",worst:"O(∞)"}}static get spaceComplexity(){return"O(1)"}}var D,w,J;class Wt extends ${constructor(){super(...arguments);a(this,D,[]);a(this,w,null);a(this,J,[])}start(e,n){super.start(e,n),s(this,D,[{left:0,right:e.length-1,stage:"split"}]),s(this,w,null),s(this,J,[])}async step(){var e,n;if(super.step(),t(this,w)){const{left:l,mid:h,right:c,i:u,j:x,k:et}=t(this,w);if((e=this.collection[u])==null||e.setState(r.Current),(n=this.collection[x])==null||n.setState(r.Current),u<=h&&(x>c||this.collection[u].value<=this.collection[x].value)?(t(this,J)[et]=this.collection[u],t(this,w).i++):(t(this,J)[et]=this.collection[x],t(this,w).j++),t(this,w).k++,await N(500/this.manager.getSpeed()),t(this,w).k>c){for(let T=l;T<=c;T++)this.collection[T]!==t(this,J)[T]&&await this.manager.swap(this.collection[T],t(this,J)[T]),this.collection[T].setState(r.Sorted);s(this,w,null)}return!0}if(t(this,D).length>0){const l=t(this,D).pop();if(l.stage==="split"){const h=l.left,c=l.right;if(h>=c)return await this.step();const u=Math.floor((h+c)/2);return t(this,D).push({left:h,right:c,mid:u,stage:"merge"}),t(this,D).push({left:u+1,right:c,stage:"split"}),t(this,D).push({left:h,right:u,stage:"split"}),await this.step()}if(l.stage==="merge"){const{left:h,mid:c,right:u}=l;return s(this,J,[...this.collection]),s(this,w,{left:h,mid:c,right:u,i:h,j:c+1,k:h}),!0}}return!1}static get name(){return"Merge Sort"}static get timeComplexity(){return{best:"O(n log n)",average:"O(n log n)",worst:"O(n log n)"}}static get spaceComplexity(){return"O(n)"}}D=new WeakMap,w=new WeakMap,J=new WeakMap;var G,M,F,X;class $t extends ${constructor(){super(...arguments);a(this,G,1);a(this,M,0);a(this,F,null);a(this,X,null)}start(e,n){super.start(e,n),s(this,G,1),s(this,M,0),s(this,F,null),s(this,X,null)}async step(){var n,l;super.step();const e=this.collection.length;if(t(this,G)>=e)return this.collection.forEach(h=>h.setState(r.Sorted)),!1;if(t(this,F)===null)return console.log("keyNode === null"),s(this,F,this.collection[t(this,G)]),t(this,F).setState(r.Current),s(this,M,t(this,G)-1),!0;if((n=t(this,X))==null||n.setState(r.Sorted),t(this,M)>=0){console.log("j >= 0");const h=this.collection[t(this,M)];if(h.setState(r.Current),s(this,X,h),h.value>t(this,F).value)return console.log("SWAP"),await this.manager.swap(this.collection[t(this,M)+1],this.collection[t(this,M)]),await N(400/this.manager.getSpeed()),d(this,M)._--,!0}return t(this,F).setState(r.Sorted),s(this,F,null),(l=t(this,X))==null||l.setState(r.Sorted),s(this,X,null),d(this,G)._++,console.log("RETURN TRUE"),!0}static get name(){return"Insertion Sort"}static get timeComplexity(){return{best:"O(n)",average:"O(n²)",worst:"O(n²)"}}static get spaceComplexity(){return"O(1)"}}G=new WeakMap,M=new WeakMap,F=new WeakMap,X=new WeakMap;var p,b,C,ut;class Gt extends ${constructor(){super(...arguments);a(this,p,0);a(this,b,1);a(this,C,0);a(this,ut,0)}start(e,n){super.start(e,n),s(this,p,0),s(this,b,1),s(this,C,0)}async step(){var e,n,l,h,c;return super.step(),(e=this.collection[t(this,ut)])==null||e.setState(r.Idle),t(this,b)>=this.collection.length?(this.collection[t(this,p)]!==this.collection[t(this,C)]&&(await this.manager.swap(this.collection[t(this,p)],this.collection[t(this,C)]),await N(500/this.manager.getSpeed())),this.collection[t(this,p)].setState(r.Sorted),d(this,p)._++,s(this,ut,t(this,b)),s(this,b,t(this,p)+1),s(this,C,t(this,p)),t(this,p)<this.collection.length):t(this,p)>=this.collection.length-1?(this.collection[t(this,p)].setState(r.Sorted),!1):((n=this.collection[t(this,C)])==null||n.setState(r.OnHold),(l=this.collection[t(this,b)])==null||l.setState(r.Current),await N(Math.max(500/this.manager.getSpeed(),10)),this.collection[t(this,b)].value<this.collection[t(this,C)].value&&((h=this.collection[t(this,C)])==null||h.setState(r.Idle),s(this,C,t(this,b)),(c=this.collection[t(this,C)])==null||c.setState(r.Current)),s(this,ut,t(this,b)),d(this,b)._++,!0)}static get name(){return"Selection Sort"}static get timeComplexity(){return{best:"O(n²)",average:"O(n²)",worst:"O(n²)"}}static get spaceComplexity(){return"O(1)"}}p=new WeakMap,b=new WeakMap,C=new WeakMap,ut=new WeakMap;var I,m,A,g,k,S,j,q;class Xt extends ${constructor(){super(...arguments);a(this,I,[]);a(this,m,null);a(this,A,null);a(this,g,null);a(this,k,null);a(this,S,null);a(this,j,null);a(this,q,null)}start(e,n){super.start(e,n),s(this,I,[[0,e.length-1]]),s(this,m,s(this,A,s(this,g,null))),s(this,k,s(this,S,null)),s(this,j,null),s(this,q,null)}async step(){super.step();const e=this.collection;if(t(this,j)===null&&t(this,I).length>0){if([d(this,m)._,d(this,A)._]=t(this,I).pop(),t(this,m)>=t(this,A))return t(this,m)===t(this,A)&&e[t(this,m)].setState(r.Sorted),t(this,I).length>0;s(this,g,Math.floor((t(this,m)+t(this,A))/2)),e[t(this,g)].setState(r.InAction),s(this,k,t(this,m)-1),s(this,S,t(this,m)),s(this,j,"partition")}if(t(this,j)==="partition"){if(t(this,q)&&t(this,q)!==e[t(this,g)]&&t(this,q).state!==r.Sorted&&t(this,q).setState(r.Idle),t(this,S)<=t(this,A)){const n=e[t(this,S)];t(this,S)!==t(this,g)&&(n.setState(r.Current),s(this,q,n));const l=e[t(this,g)].value;return n.value<l&&(d(this,k)._++,t(this,k)===t(this,g)?s(this,g,t(this,S)):t(this,S)===t(this,g)&&s(this,g,t(this,k)),await this.manager.swap(e[t(this,k)],e[t(this,S)])),await N(400/this.manager.getSpeed()),d(this,S)._++,!0}s(this,j,"final_swap")}if(t(this,j)==="final_swap"){const n=this.collection,l=t(this,k)+1;return t(this,g)!==l&&(await this.manager.swap(n[t(this,g)],n[l]),s(this,g,l)),n[t(this,g)].setState(r.Sorted),t(this,I).push([t(this,m),t(this,g)-1]),t(this,I).push([t(this,g)+1,t(this,A)]),s(this,m,s(this,A,s(this,g,null))),s(this,k,s(this,S,null)),s(this,j,null),s(this,q,null),t(this,I).length>0}return t(this,I).length>0}static get name(){return"Quick Sort"}static get timeComplexity(){return{best:"O(n log n)",average:"O(n log n)",worst:"O(n²)"}}static get spaceComplexity(){return"O(log n)"}}I=new WeakMap,m=new WeakMap,A=new WeakMap,g=new WeakMap,k=new WeakMap,S=new WeakMap,j=new WeakMap,q=new WeakMap;var L,bt,K,nt,Y,Z,_;class Yt extends ${constructor(){super(...arguments);a(this,L,0);a(this,bt,1.3);a(this,K,0);a(this,nt,[]);a(this,Y,null);a(this,Z,null);a(this,_,0)}start(e,n){super.start(e,n),s(this,L,e.length),s(this,K,0),s(this,nt,[]),s(this,Y,null),s(this,Z,null),s(this,_,0)}async step(){super.step();const e=this.collection;if(t(this,Y)&&t(this,Y).state!==r.Sorted&&t(this,Y).setState(r.Idle),t(this,Z)&&t(this,Z).state!==r.Sorted&&t(this,Z).setState(r.Idle),t(this,L)===1&&!t(this,nt)[t(this,_)-1]){const l=this.collection.find(h=>h.state!==r.Sorted);return l==null?!1:(l.setState(r.Sorted),!0)}t(this,K)===0&&(s(this,L,Math.floor(t(this,L)/t(this,bt))),t(this,L)<1&&s(this,L,1),t(this,nt)[t(this,_)]=!1);const n=t(this,K)+t(this,L);if(n<e.length){const l=e[t(this,K)],h=e[n];l.setState(r.Current),h.setState(r.Current),s(this,Y,l),s(this,Z,h),l.value>h.value&&(await this.manager.swap(l,h),t(this,nt)[t(this,_)]=!0),await N(300/this.manager.getSpeed()),d(this,K)._++}else s(this,K,0),d(this,_)._++;return!0}static get name(){return"Comb Sort"}static get timeComplexity(){return{best:"O(n log n)",average:"O(n²)",worst:"O(n²)"}}static get spaceComplexity(){return"O(1)"}}L=new WeakMap,bt=new WeakMap,K=new WeakMap,nt=new WeakMap,Y=new WeakMap,Z=new WeakMap,_=new WeakMap;var lt,rt,f,tt,R,ot,V,W;class Zt extends ${constructor(){super(...arguments);a(this,lt,0);a(this,rt,0);a(this,f,0);a(this,tt,"forward");a(this,R,!1);a(this,ot,!0);a(this,V,null);a(this,W,null)}start(e,n){super.start(e,n),s(this,lt,0),s(this,rt,e.length-1),s(this,f,0),s(this,tt,"forward"),s(this,R,!1),s(this,ot,!0),s(this,V,null),s(this,W,null)}async step(){super.step();const e=this.collection;if(t(this,V)&&t(this,V).state!==r.Sorted&&t(this,V).setState(r.Idle),t(this,W)&&t(this,W).state!==r.Sorted&&t(this,W).setState(r.Idle),!t(this,ot)){for(const n of e)n.setState(r.Sorted);return!1}if(t(this,tt)==="forward")if(t(this,f)<t(this,rt)){const n=e[t(this,f)],l=e[t(this,f)+1];return n.setState(r.Current),l.setState(r.Current),s(this,V,n),s(this,W,l),n.value>l.value?(await this.manager.swap(n,l),s(this,R,!0)):await N(500/this.manager.getSpeed()),d(this,f)._++,!0}else return d(this,rt)._--,s(this,f,t(this,rt)),s(this,tt,"backward"),s(this,ot,t(this,R)),s(this,R,!1),!0;if(t(this,tt)==="backward")if(t(this,f)>t(this,lt)){const n=e[t(this,f)-1],l=e[t(this,f)];return n.setState(r.Current),l.setState(r.Current),s(this,V,n),s(this,W,l),n.value>l.value?(await this.manager.swap(n,l),s(this,R,!0)):await N(500/this.manager.getSpeed()),d(this,f)._--,!0}else return d(this,lt)._++,s(this,f,t(this,lt)),s(this,tt,"forward"),s(this,ot,t(this,R)),s(this,R,!1),!0;return!0}static get name(){return"Shaker Sort"}static get timeComplexity(){return{best:"O(n)",average:"O(n²)",worst:"O(n²)"}}static get spaceComplexity(){return"O(1)"}}lt=new WeakMap,rt=new WeakMap,f=new WeakMap,tt=new WeakMap,R=new WeakMap,ot=new WeakMap,V=new WeakMap,W=new WeakMap;var v,mt,P,B,H;class _t extends ${constructor(){super(...arguments);a(this,v,0);a(this,mt,2);a(this,P,0);a(this,B,0);a(this,H,null)}start(e,n){super.start(e,n),s(this,v,Math.floor(e.length/t(this,mt))),s(this,P,t(this,v)),s(this,B,null),s(this,H,null)}async step(){super.step();const e=this.collection;for(const n of e)n.state!==r.Sorted&&n.setState(r.Idle);if(t(this,v)<1){for(const n of e)n.setState(r.Sorted);return!1}if(t(this,H)===null&&t(this,P)<e.length)return s(this,H,e[t(this,P)]),s(this,B,t(this,P)),t(this,H).setState(r.Current),!0;if(t(this,B)>=t(this,v)&&e[t(this,B)-t(this,v)].value>t(this,H).value){const n=e[t(this,B)],l=e[t(this,B)-t(this,v)];return n.setState(r.Current),l.setState(r.Current),await this.manager.swap(n,l),await N(300/this.manager.getSpeed()),s(this,B,t(this,B)-t(this,v)),!0}return d(this,P)._++,s(this,H,null),t(this,P)>=e.length&&(s(this,v,Math.floor(t(this,v)/t(this,mt))),s(this,P,t(this,v)),s(this,B,null),s(this,H,null)),!0}static get name(){return"Shell Sort"}static get timeComplexity(){return{best:"O(n log n)",average:"O(n (log n)²)",worst:"O(n²)"}}static get spaceComplexity(){return"O(1)"}}v=new WeakMap,mt=new WeakMap,P=new WeakMap,B=new WeakMap,H=new WeakMap;const te={bubble:Kt,merge:Wt,insert:$t,quick:Xt,selection:Gt,comb:Yt,shaker:Zt,shell:_t,bogo:Vt},ee=document.getElementById("sortingSvg"),gt=document.getElementById("table"),Ot=document.getElementById("selectAlgoBtn"),se=document.getElementById("selectAlgo"),It=document.getElementById("play"),ie=document.getElementById("step"),Ft=document.getElementById("animationSpeed"),St=document.getElementById("collectionField"),jt=document.getElementById("collectionSize"),At=document.getElementById("createNewCollection"),kt=document.getElementById("shuffleCollection");for(const o of se.children)o.onclick=()=>Lt(o.getAttribute("data-algo"),o.innerHTML);St.onchange=oe;It.onclick=ne;ie.onclick=ae;At.onclick=Pt;kt.onclick=re;Ft.onchange=o=>Rt(Number.parseInt(o.target.value));jt.onchange=o=>le(Number.parseInt(o.target.value));let dt=!1;const y=vt.getInstance();y.configure(ee,St,gt);Lt("bubble","Bubble sort");let qt=Number.parseInt(jt.value);function ne(){dt?Bt():(dt=!0,y.start(),requestAnimationFrame(Ht),It.classList.add("active"),kt.disabled=!0,At.disabled=!0,Ot.disabled=!0,St.disabled=!0)}function Lt(o,i){Bt();const e=te[o];y.setAlgorithm(new e),Ot.innerHTML=i,document.querySelector(".algo-name").textContent=e.name,gt.querySelector(".tc-best").textContent=e.timeComplexity.best,gt.querySelector(".tc-average").textContent=e.timeComplexity.average,gt.querySelector(".tc-worst").textContent=e.timeComplexity.worst,gt.querySelector(".sc").textContent=e.spaceComplexity}function Rt(o){y.changeSpeed(o)}function le(o){qt=o}function re(){y.shuffleCollection()}function Pt(){dt||y.createCollection(qt)}function oe(){try{const o=St.value.trim().split(`
`).filter(i=>!!i).map(i=>Number.parseInt(i.trim()));y.createCollection(o.length,o)}catch(o){console.error("Cannot replace collection",o)}}function Bt(){dt=!1,It.classList.remove("active"),kt.disabled=!1,At.disabled=!1,Ot.disabled=!1,St.disabled=!1}async function ae(){y.isRunning()||y.start(),y.step()}async function Ht(o){y.isRunning()?y.step():Bt(),dt&&requestAnimationFrame(Ht)}Pt();Rt(Number.parseInt(Ft.value));
